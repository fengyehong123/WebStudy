# Nodeæ˜¯ä»€ä¹ˆ
Nodeæ˜¯ä¸€ä¸ªåŸºäºChrom V8å¼•æ“çš„JavaScriptçš„`ä»£ç è¿è¡Œç¯å¢ƒ`

*ç«¯å£*
- ç«¯å£æ˜¯è®¡ç®—æœºä¸å¤–ç•Œé€šè®¯äº¤æµçš„å‡ºå£,ç”¨æ¥åŒºåˆ†æœåŠ¡å™¨ç”µè„‘ä¸­æä¾›çš„ä¸åŒçš„æœåŠ¡

**ä»£ç è¿è¡Œç¯å¢ƒ**
- æµè§ˆå™¨(è½¯ä»¶)èƒ½å¤Ÿè¿è¡ŒJavaScriptä»£ç ,æµè§ˆå™¨å°±æ˜¯JavaScriptä»£ç çš„è¿è¡Œç¯å¢ƒ
- Node(è½¯ä»¶)èƒ½å¤Ÿè¿è¡ŒJavaScriptä»£ç ,Nodeå°±æ˜¯JavaScriptä»£ç çš„è¿è¡Œç¯å¢ƒ

**Pathç¯å¢ƒå˜é‡**
- å­˜å‚¨ç³»ç»Ÿä¸­çš„ç›®å½•,åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œå‘½ä»¤çš„æ—¶å€™ç³»ç»Ÿä¼šè‡ªåŠ¨å»è¿™äº›ç›®å½•ä¸­æŸ¥æ‰¾å‘½ä»¤çš„ä½ç½®

**Node.jsçš„ç»„æˆ**
- JavaScriptç”±ä¸‰éƒ¨åˆ†ç»„æˆ
    - ECMAScript
        æ˜¯JSçš„æ ¸å¿ƒ,è§„å®šäº†JSçš„è¯­æ³•éƒ¨åˆ†
    - DOM
    - BOM
    DOMå’ŒBOMæ˜¯æµè§ˆå™¨è¿™ä¸ªè¿è¡Œç¯å¢ƒä¸ºJSè¯­è¨€æä¾›çš„API

- Node.jsæ˜¯æœ‰ECMAScriptä»¥åŠNodeç¯å¢ƒæä¾›çš„ä¸€äº›é™„åŠ APIç»„æˆçš„.åŒ…æ‹¬æ–‡ä»¶,ç½‘ç»œ,è·¯å¾„ç­‰ä¸€äº›æ›´åŠ å¼ºå¤§çš„API
    - ECMAScript
    - Nodeæ¨¡å—API

**JSå¼€å‘çš„å¼Šç«¯**
ä½¿ç”¨JSå¼€å‘çš„æ—¶å€™å­˜åœ¨ä¸¤å¤§é—®é¢˜
- æ–‡ä»¶ä¾èµ–
- å‘½åå†²çª

**è½¯ä»¶ä¸­çš„æ¨¡å—åŒ–å¼€å‘**
ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯ä¸€ä¸ªæ¨¡å—,å¤šä¸ªæ¨¡å—å¯ä»¥ç»„æˆä¸€ä¸ªå®Œæ•´çš„åº”ç”¨,æŠ½ç¦»ä¸€ä¸ªæ¨¡å—ä¸ä¼šå½±å“å…¶ä»–åŠŸèƒ½çš„è¿è¡Œ

**Node.jsä¸­æ¨¡å—åŒ–å¼€å‘è§„èŒƒ**
- Node.jsè§„å®š`ä¸€ä¸ªJsæ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—`,æ¨¡å—å†…å®¹å®šä¹‰çš„å˜é‡å’Œå‡½æ•°é»˜è®¤æƒ…å†µä¸‹åœ¨`å¤–éƒ¨æ— æ³•å¾—åˆ°`
- æ¨¡å—å†…éƒ¨å¯ä»¥ä½¿ç”¨`export`å¯¹è±¡è¿›è¡Œæˆå‘˜å¯¼å‡º,ä½¿ç”¨`require`æ–¹æ³•å¯¼å…¥å…¶ä»–æ¨¡å—

â­•æ¨¡å—æˆå‘˜å¯¼å‡º
```js
    // åœ¨æ¨¡å—å†…éƒ¨å®šä¹‰å˜é‡
    let version = 1.0

    // åœ¨æ¨¡å—å†…éƒ¨å®šä¹‰æ–¹æ³•
    const sayHi = name => `ä½ å¥½,${name}`;

    // å‘æ¨¡å—å¤–éƒ¨å¯¼å‡ºæ•°æ®
    exports.version = version;
    exports.sayHi = sayHi;
```
â­•æ¨¡å—æˆå‘˜å¯¼å…¥
```js
    // åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­å¯¼å…¥
    let a = require('./b.js');
    // å¯¼å…¥æ¨¡å—çš„æ—¶å€™,æ–‡ä»¶çš„åç¼€åç§°å¯ä»¥çœç•¥(å› ä¸ºé»˜è®¤å¯¼å…¥çš„å°±æ˜¯jsæ–‡ä»¶)
    // let a = require('./b');

    // è¾“å‡ºbæ¨¡å—ä¸­çš„versionå˜é‡
    console.log(a.version);
    // è°ƒç”¨bæ¨¡å—ä¸­çš„sayHiæ–¹æ³•å¹¶ä¸”è¾“å‡ºå…¶è¿”å›å€¼
    console.log(a.sayHi('JavaScript'))
```
â­•æ¨¡å—æˆå‘˜å¯¼å‡ºçš„å¦ä¸€ç§æ–¹å¼
```js
    module.exports.version = version;
    module.exports.sayHi = sayHi;
```
> `exports`æ˜¯`module.exports`çš„åˆ«å(åœ°å€å¼•ç”¨å…³ç³»),å¯¼å‡ºå¯¹è±¡*æœ€ç»ˆä»¥module.exportsä¸ºå‡†*

â­•æ¨¡å—å¯¼å‡ºä¸¤ç§æ–¹å¼çš„è”ç³»ä¸åŒºåˆ«
```js
    let version = 1.0

    // å¦‚æœè¿™æ ·å¯¼å‡ºçš„è¯,ä¸¤ç§å¯¼å‡ºæ˜¯ç›¸åŒçš„
    exports.version = version;
    module.exports.version = version;

    // å¦‚æœæ˜¯ä¸‹é¢çš„è¿™ç§å¯¼å‡º,æœ€ç»ˆä»¥module.exportsä¸ºåŸºå‡†.å› ä¸ºæ­¤æ—¶ä¸¤ç§æ–¹å¼å¯¼å‡ºçš„ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡
    exports.version = version;
    module.exports = {
        name: 'zhangsan'
    }
```

**ä»€ä¹ˆæ˜¯ç³»ç»Ÿæ¨¡å—**
Nodeè¿è¡Œç¯å¢ƒæä¾›çš„API.å› ä¸ºè¿™äº›éƒ½æ˜¯ä»¥æ¨¡å—åŒ–çš„æ–¹å¼è¿›è¡Œå¼€å‘çš„.æ‰€ä»¥æˆ‘ä»¬åˆç§°Nodeè¿è¡Œç¯å¢ƒæä¾›çš„APIä¸ºç³»ç»Ÿæ¨¡å—

ğŸ˜ç³»ç»Ÿæ¨¡å—fsçš„æ–‡ä»¶æ“ä½œ
```js
    // å¯¼å…¥æ–‡ä»¶æ“ä½œçš„åŒ…
    const fs = require('fs')

    // ä½¿ç”¨æ–‡ä»¶æ“ä½œå¯¹è±¡æ¥è¯»å–æ–‡ä»¶çš„å†…å®¹
    fs.readFile('æ–‡ä»¶è·¯å¾„/æ–‡ä»¶åç§°'[,'æ–‡ä»¶ç¼–ç '], callback);

    // è¯¦ç»†ç¤ºä¾‹
    fs.readFile('./css/base.css', 'utf-8', (err, doc) => {
        // å¦‚æœæ–‡ä»¶è¯»å–çš„æ—¶å€™å‘ç”Ÿé”™è¯¯,åˆ™å‚æ•°errçš„å€¼ä¸ºé”™è¯¯å¯¹è±¡;å¦åˆ™errçš„å€¼ä¸ºnull
        // docå‚æ•°ä¸ºè¯»å–åˆ°çš„æ–‡ä»¶çš„å†…å®¹
        if(err == null) {
            // å¦‚æœåœ¨æ–‡ä»¶è¯»å–çš„æ—¶å€™æ²¡æœ‰å‘ç”Ÿé”™è¯¯å°±æŠŠè¯»å–åˆ°çš„æ–‡ä»¶å†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ä¸Š
            console.log(doc);
        }
    })
```
ğŸ˜ç³»ç»Ÿæ¨¡å—pathè·¯å¾„æ“ä½œ
**ä¸ºä»€ä¹ˆè¦è¿›è¡Œè·¯å¾„æ‹¼æ¥**
ä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦ä¸åŒ
```js
    // å¯¼å…¥pathæ¨¡å—
    const path = require('path');
    // è·¯å¾„æ‹¼æ¥
    let finialPath = path.join('itcast', 'a', 'b', 'c.css');
    // è¾“å‡ºç»“æœ itcast\a\b\c.css
    console.log(finialPath);
```

**ç¬¬ä¸‰æ–¹æ¨¡å—nodemon**
nodemonæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·,ç”¨æ¥è¾…åŠ©é¡¹ç›®å¼€å‘
  åœ¨Node.jsä¸­,æ¯ä¸€æ¬¡ä¿®æ”¹æ–‡ä»¶éƒ½è¦åœ¨å‘½ä»¤è¡Œå·¥å…·ä¸­é‡æ–°æ‰§è¡Œ.jsæ–‡ä»¶,éå¸¸ç¹ç.
ä½†æ˜¯ä½¿ç”¨äº†nodemonæ¨¡å—ä¹‹å,è¯¥æ¨¡å—ä¼šç›‘å¬æˆ‘ä»¬æ‰§è¡Œçš„.jsæ–‡ä»¶.ä¸€æ—¦æ–‡ä»¶å†…å®¹å‘ç”Ÿå˜åŒ–,nodemonæ¨¡å—ä¼šè‡ªåŠ¨æ‰§è¡Œ.jsæ–‡ä»¶

ğŸ˜ä½¿ç”¨æ­¥éª¤

1. ä½¿ç”¨`npm install nodemon -g`å…¨å±€ä¸‹è½½å®‰è£…è¯¥æ¨¡å—åŒ…
2. åœ¨å‘½ä»¤è¡Œå·¥å…·ä¸­ä½¿ç”¨nodemonå‘½ä»¤æ¥ä»£æ›¿nodeå‘½ä»¤æ‰§è¡Œæ–‡ä»¶.ä¾‹å¦‚`nodemon ./test.js`

**ç¬¬ä¸‰æ–¹æ¨¡å—nrm**
nrm(npm registry manager): npmä¸‹è½½åœ°å€åˆ‡æ¢å·¥å…·
éœ€è¦åˆ‡æ¢çš„åŸå› :
  npmé»˜è®¤çš„ä¸‹è½½åœ°å€åœ¨å›½å¤–,å›½å†…çš„ä¸‹è½½é€Ÿåº¦æ…¢.é€šè¿‡nrmä½¿ç”¨å›½å†…çš„é•œåƒæºç½‘ç«™è¿›è¡Œä¸‹è½½,å¯ä»¥æå‡ä¸‹è½½é€Ÿåº¦

ğŸ˜ä½¿ç”¨æ­¥éª¤

1. ä½¿ç”¨`npm install nrm -g`è¿›è¡Œå…¨å±€ä¸‹è½½å®‰è£…
2. é€šè¿‡`nrm ls`æ¥æŸ¥è¯¢å¯ä»¥ä¸‹è½½çš„åœ°å€åˆ—è¡¨
3. é€šè¿‡`nrm use ä¸‹è½½åœ°å€åç§°`æ¥åˆ‡æ¢npmçš„ä¸‹è½½åœ°å€

# ç¬¬ä¸‰æ–¹æ¨¡å—Gulp
- åŸºäºnodeå¹³å°å¼€å‘çš„å‰ç«¯æ„å»ºå·¥å…·
- å°†æœºæ¢°åŒ–æ“ä½œç¼–å†™æˆä»»åŠ¡,æƒ³è¦æ‰§è¡Œæœºæ¢°åŒ–æ“ä½œçš„æ—¶å€™æ‰§è¡Œä¸€ä¸ªå‘½ä»¤è¡Œå‘½ä»¤,ç„¶åä»»åŠ¡å°±å¯ä»¥è‡ªåŠ¨æ‰§è¡Œäº†
- å½“é¡¹ç›®å¼€å‘å®Œæˆ,éœ€è¦å°†é¡¹ç›®éƒ¨ç½²åˆ°çº¿ä¸Šçš„æ—¶å€™,é€šå¸¸éƒ½éœ€è¦å°†.css,.js,.htmlæ–‡ä»¶è¿›è¡Œå‹ç¼©.ä»¥å‰è¿™äº›å·¥ä½œéƒ½æ˜¯éœ€è¦æ‰‹åŠ¨è¿›è¡Œçš„,ä½†æ˜¯ç°åœ¨ä½¿ç”¨Gulpå°±å¯ä»¥å®Œæˆè¿™äº›ä»»åŠ¡

**Gulpèƒ½åšä»€ä¹ˆ**
- é¡¹ç›®ä¸Šçº¿,éœ€è¦å°†HTML,CSS,JSæ–‡ä»¶å‹ç¼©åˆå¹¶
- è¯­æ³•è½¬æ¢(ES6,less...)
- å…¬å…±æ–‡ä»¶æŠ½ç¦»
- ä¿®æ”¹æ–‡ä»¶ä¹‹å,è®©æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°

**Gulpçš„ä½¿ç”¨**
1. ä½¿ç”¨`npm install gulp`ä¸‹è½½Gulpåº“æ–‡ä»¶
2. åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º`gulpfile.js`æ–‡ä»¶(ğŸ™„æ–‡ä»¶åç§°ä¸€å®šè¦å«è¿™ä¸ª,ä¸èƒ½è‡ªå·±éšæ„è‡ªå®šä¹‰)
3. é‡æ„é¡¹ç›®çš„æ–‡ä»¶å¤¹ç»“æ„`.srcç›®å½•`æ”¾ç½®æºä»£ç æ–‡ä»¶.`distç›®å½•`æ”¾ç½®æ„å»ºåçš„æ–‡ä»¶
4. åœ¨gulpfile.jsä¸­ç¼–å†™ä»»åŠ¡
5. é€šè¿‡`npm install gulp-cli -g`å…¨å±€å®‰è£…è¿è¡Œgulpå‘½ä»¤çš„å‘½ä»¤è¡Œå·¥å…·
6. åœ¨å‘½ä»¤è¡Œå·¥å…·ä¸­æ‰§è¡Œgulpä»»åŠ¡.ä¾‹å¦‚:`gulp first`(firstä¸ºæˆ‘ä»¬åˆ›å»ºçš„gulpä»»åŠ¡)
   å½“æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä¸Šé¢çš„å‘½ä»¤çš„æ—¶å€™,gulpå°±ä¼šè‡ªåŠ¨å»æˆ‘ä»¬é¡¹ç›®çš„`æ ¹ç›®å½•ä¸‹çš„gulpfile.js`ä¸­æŸ¥æ‰¾ä»»åŠ¡åç§°ä¸ºfirstçš„ä»»åŠ¡å¹¶ä¸”æ‰§è¡Œ

**Gulpä¸­æä¾›çš„æ–¹æ³•**
- `gulp.src()`: è·å–ä»»åŠ¡è¦å¤„ç†çš„æ–‡ä»¶
- `gulp.dest()`: è¾“å‡ºæ–‡ä»¶
- `gulp.task()`: å»ºç«‹gulpä»»åŠ¡
- `gulp.watch()`: ç›‘æ§æ–‡ä»¶çš„å˜åŒ–

**Gulpä¸­çš„æ’ä»¶**
> Gulpæœ¬èº«æä¾›çš„APIæ¯”è¾ƒå°‘,å®ƒä¸»è¦æ˜¯é…åˆæ’ä»¶æ¥å®ç°å„ç§åŠŸèƒ½
- gulp-htmlmin: htmlæ–‡ä»¶å‹ç¼©
  `npm install gulp-htmlmin`
- gulp-csso: å‹ç¼©css
  `npm install gulp-csso`
- gulp-babel: JavaScriptè¯­æ³•è½¬åŒ–
  `npm install gulp-babel @babel/core @babel/preset-env`
- gulp-uglify: å‹ç¼©æ··æ·†JavaScript
  `npm install gulp-uglify`
- gulp-less: lessè¯­æ³•è½¬åŒ–
  `npm install gulp-less`
- gulp-file-include: å…¬å…±æ–‡ä»¶åŒ…å«
  `npm install gulp-file-include`
- browsersync: æµè§ˆå™¨å®æ—¶åŒæ­¥

```js
    // CommonJSä¸­çš„å¼•å…¥æ–¹æ³•
    const gulp = require('gulp');
    // ES6ä¸­çš„å¼•å…¥æ–¹å¼
    import gulp from 'gulp'

    // ä½¿ç”¨gulp.task()æ–¹æ³•å»ºç«‹ä»»åŠ¡
    // ğŸ™„firstæ˜¯æˆ‘ä»¬å»ºç«‹çš„ä»»åŠ¡çš„åç§°
    gulp.task('first', (cb)=> {
        // è·å–è¦å¤„ç†çš„æ–‡ä»¶
        gulp.src('./src/css/base.css')
        // å°†å¤„ç†åçš„æ–‡ä»¶è¾“å‡ºåˆ°distç›®å½•
        .pipe(gulp.dest('./dist/css'));

        // ä»»åŠ¡æ‰§è¡Œç»“æŸä¹‹å,é€šè¿‡å›è°ƒå‡½æ•°æ¥ç»“æŸç¨‹åºçš„æ‰§è¡Œ
        cb();
    })
```

**node_modulesæ–‡ä»¶å¤¹çš„é—®é¢˜**
1. æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶è¿‡å¤šè¿‡ç¢,å½“æˆ‘ä»¬å°†é¡¹ç›®æ•´ä½“æ‹·è´ç»™åˆ«äººçš„æ—¶å€™,ä¼ è¾“çš„é€Ÿåº¦ä¼šå¾ˆæ…¢
2. å¤æ‚çš„æ¨¡å—ä¾èµ–å† ä»¥éœ€è¦è¢«è®°å½•,ç¡®ä¿æ¨¡å—çš„ç‰ˆæœ¬å’Œå½“å‰ä¿æŒä¸€è‡´,å¦åˆ™ä¼šå¯¼è‡´å½“å‰é¡¹ç›®è¿è¡ŒæŠ¥é”™

**package.jsonæ–‡ä»¶çš„ä½œç”¨**
ğŸ‘ é¡¹ç›®æè¿°æ–‡ä»¶
ğŸ‘ è®°å½•äº†å½“å‰é¡¹ç›®çš„ä¿¡æ¯.ä¾‹å¦‚é¡¹ç›®åç§°,ç‰ˆæœ¬,ä½œè€…,Githubåœ°å€,å½“å‰é¡¹ç›®ä¾èµ–äº†å“ªä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—
ğŸ‘ å¯ä»¥ä½¿ç”¨`npm init -y`å‘½ä»¤ç”Ÿæˆ(æ·»åŠ yæ˜¯å…¨éƒ¨ä½¿ç”¨é¡¹ç›®çš„é»˜è®¤ä¿¡æ¯)
ğŸ‘ ä¸€èˆ¬è¿™ä¸ªæ–‡ä»¶éƒ½å­˜æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•
ğŸ‘ package.jsonå¯ä»¥è®°è½½é¡¹ç›®ä¸‹è½½çš„ç¬¬ä¸‰æ–¹æ¨¡å—
   åªè¦ä½¿ç”¨`npm install æ¨¡å—åç§°`æ¥ä¸‹è½½æ¨¡å—,æ¨¡å—çš„ç›¸å…³ä¿¡æ¯å°±ä¼šè®°å½•åˆ°package.jsonæ–‡ä»¶ä¸­
```js
  {
    // é¡¹ç›®çš„åç§°
    "name": "description", 
    // é¡¹ç›®çš„ç‰ˆæœ¬
    "version": "1.0.0",
    // é¡¹ç›®çš„æè¿°,é€šè¿‡è¿™ä¸ªæè¿°å¯ä»¥è®©åˆ«äººå¿«é€Ÿçš„äº†è§£è¯¥é¡¹ç›®çš„åŠŸèƒ½
    "description": "",
    // é¡¹ç›®çš„ä¸»å…¥å£æ–‡ä»¶
    "main": "index.js",
    // å­˜å‚¨å‘½ä»¤çš„åˆ«å,å½“æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œè¾“å…¥å¾ˆé•¿çš„å‘½ä»¤çš„æ—¶å€™,æ¯æ¬¡è¾“å…¥éƒ½å¾ˆéº»çƒ¦,è¿™ä¸ªæ—¶å€™å¯ä»¥æŠŠå‘½ä»¤å®šä¹‰åœ¨æ­¤å¤„
    // ç„¶åä½¿ç”¨å‘½ä»¤çš„åˆ«åæ¥å¿«é€Ÿçš„æ‰§è¡Œå‘½ä»¤
    "scripts": {
      "test": "echo \"Error: no test specified\" && exit 1",
      // è‡ªå®šä¹‰ä¸€ä¸ªè„šæœ¬æ‰§è¡Œå‘½ä»¤,å–åˆ«åä¸ºbuild
      "build": "nodemon app.js"
    },
    // å…³é”®å­—,å¯ä»¥ä½¿ç”¨å…³é”®å­—æ¥æè¿°å½“å‰çš„é¡¹ç›®
    "keywords": [],
    // é¡¹ç›®çš„ä½œè€…
    "author": "",
    // é¡¹ç›®éµå¾ªçš„åè®®
    "license": "ISC",
    // è®°è½½ç€é¡¹ç›®æ‰€ä¾èµ–çš„æ¨¡å—ç‰ˆæœ¬
    "dependencies": {
      "formidable": "^1.2.2"
    },
    // å¼€å‘ä¾èµ–,ä»…åœ¨å¼€å‘é˜¶æ®µä¼šç”¨åˆ°çš„åŒ…,åœ¨é¡¹ç›®è¿è¡Œé˜¶æ®µç”¨ä¸åˆ°è¿™ä¸ªåŒ…
    "devDependencies": {
      "gulp": "^3.9.1"
    }
  }
```
ğŸ‘package.jsonä¸­`scriptsè„šæœ¬`çš„ä½¿ç”¨
  æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªè„šæœ¬,åˆ«åä¸ºbuild.åœ¨ä½¿ç”¨çš„æ—¶å€™åªéœ€è¦:
  `npm run è‡ªå®šä¹‰çš„è„šæœ¬åç§°`

**package-lock.jsonæ–‡ä»¶çš„ä½œç”¨**
- è®°å½•æ¨¡å—å’Œæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»
- é”å®šåŒ…çš„ç‰ˆæœ¬,ç¡®ä¿å†æ¬¡ä¸‹è½½çš„æ‰‹ä¸ä¼šå› ä¸ºåŒ…ç‰ˆæœ¬ä¸åŒè€Œäº§ç”Ÿçš„é—®é¢˜
- åŠ å¿«ä¸‹è½½é€Ÿåº¦,å› ä¸ºè¯¥æ–‡ä»¶ä¸­å·²ç»è®°å½•äº†é¡¹ç›®æ‰€ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…çš„æ ‘çŠ¶ç»“æ„å’ŒåŒ…çš„ä¸‹è½½åœ°å€,
  é‡æ–°å®‰è£…çš„æ—¶å€™åªéœ€è¦ä¸‹è½½å³å¯, ä¸éœ€è¦åšé¢å¤–çš„åŠŸèƒ½

ğŸ˜æœ‰äº†packag.jsonå’Œpackage-lock.jsonä¹‹åæˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾åˆ°é¡¹ç›®çš„æ ¹ç›®å½•
   ç„¶åæ‰§è¡Œ`npm install`å‘½ä»¤,`npm`å°±ä¼šå»é¡¹ç›®çš„æ ¹ç›®å½•æŸ¥æ‰¾package.jsonè¿™ä¸ªæ–‡ä»¶,ç„¶åå»æ‰¾åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­dependenciesæ‰€è®°è½½çš„ä¾èµ–,ç„¶åè¿›è¡Œæ¨¡å—ä¸‹è½½,æœ€åæ„é€ æˆ`node_modules`

**é¡¹ç›®ä¾èµ–**
- åœ¨é¡¹ç›®çš„å¼€å‘é˜¶æ®µå’Œçº¿ä¸Šè¿è¡Œé˜¶æ®µ,éƒ½éœ€è¦`ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…`,æˆä¸º`é¡¹ç›®ä¾èµ–`
- ä½¿ç”¨`npm install`åŒ…å‘½ä»¤ä¸‹è½½çš„æ–‡ä»¶ä¼šè¢«é»˜è®¤æ·»åŠ åˆ°package.jsonæ–‡ä»¶çš„dependencieså­—æ®µä¸­

**å¼€å‘ä¾èµ–**
- åœ¨é¡¹ç›®çš„å¼€å‘é˜¶æ®µéœ€è¦ä¾èµ–,ä½†æ˜¯çº¿ä¸Šè¿è¡Œé˜¶æ®µä¸éœ€è¦ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…,ç§°ä¸ºå¼€å‘ä¾èµ–
- ä½¿ç”¨`npm install åŒ…å --save-dev`å‘½ä»¤,ä¼šå°†åŒ…æ·»åŠ åˆ°package.jsonæ–‡ä»¶çš„`devDependencieså­—æ®µ`ä¸­

**ä¸åŒé˜¶æ®µåŒ…çš„ä¸‹è½½**
`npm install`: ä¸‹è½½æ‰€æœ‰ä¾èµ–çš„æ¨¡å—
`npm install --production`: ä»…ä¸‹è½½é¡¹ç›®è¿è¡Œæ—¶æ‰€ç”¨åˆ°çš„ä¾èµ–

# Node.jsä¸­æ¨¡å—çš„åŠ è½½æœºåˆ¶
1. å½“æ¨¡å—æ‹¥æœ‰è·¯å¾„ä½†æ˜¯æ²¡æœ‰åç¼€çš„æ—¶å€™
```js
  require('./find.js');
  require('./find');
```
- requireæ–¹æ³•æ ¹æ®æ¨¡å—è·¯å¾„æŸ¥æ‰¾æ¨¡å—.å¦‚æœæ˜¯å®Œæ•´çš„è·¯å¾„,ç›´æ¥å¼•å…¥æ¨¡å—
- å¦‚æœæ¨¡å—åç¼€çœç•¥,å…ˆæ‰¾åŒåJSæ–‡ä»¶,å†æ‰¾åŒåçš„JSæ–‡ä»¶å¤¹
- å¦‚æœæ‰¾åˆ°äº†åŒåæ–‡ä»¶å¤¹,å°±ä¼šå»æ‰¾æ–‡ä»¶å¤¹ä¸­çš„index.js
- å¦‚æœæ–‡ä»¶å¤¹ä¸­æ²¡æœ‰index.jsçš„è¯,å°±ä¼šå»å½“å‰æ–‡ä»¶å¤¹ä¸­çš„`packape.js`æ–‡ä»¶ä¸­æŸ¥æ‰¾`mainé€‰é¡¹`ä¸­çš„`å…¥å£æ–‡ä»¶`
- å¦‚æœæ‰¾åˆ°æŒ‡å®šçš„å…¥å£æ–‡ä»¶ä¸å­˜åœ¨æˆ–è€…æ²¡æœ‰æŒ‡å®šå…¥å£æ–‡ä»¶å°±ä¼šæŠ¥é”™,æ¨¡å—æ²¡æœ‰æ‰¾åˆ°

2. å½“æ¨¡å—æ²¡æœ‰è·¯å¾„ä¸”æ²¡æœ‰åç¼€çš„æ—¶å€™
```js
  require('find');
```
- Node.jsä¼šå‡è®¾è¯¥æ¨¡å—æ˜¯ä¸€ä¸ªç³»ç»Ÿæ¨¡å—,å»ç³»ç»Ÿæ¨¡å—ä¸­æŸ¥æ‰¾
- å¦‚æœåœ¨ç³»ç»Ÿæ¨¡å—ä¸­æ‰¾ä¸åˆ°çš„è¯,å°±ä¼šå»`ndoe_modules`æ–‡ä»¶å¤¹ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰`åŒåå­—çš„JSæ–‡ä»¶`
- å¦‚æœæ²¡æœ‰åŒåçš„æ–‡ä»¶çš„è¯,ä¼šåœ¨`ndoe_modules`ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰`åŒåçš„æ–‡ä»¶å¤¹`
- å¦‚æœåœ¨`ndoe_modules`ä¸­,æœ‰åŒåçš„æ–‡ä»¶å¤¹çš„è¯,å°±ä¼šæŸ¥çœ‹æ–‡ä»¶å¤¹ä¸­æ˜¯å¦æœ‰`index.js`è¿™ä¸ªæ–‡ä»¶,å¦‚æœæœ‰çš„è¯å°±å¼•å…¥
- å¦‚æœæ²¡æœ‰idnex.jsæ–‡ä»¶çš„è¯,å°±æŸ¥çœ‹è¯¥æ–‡ä»¶å¤¹ä¸­çš„`package.json`ä¸­çš„mainé€‰é¡¹ç¡®å®šæ¨¡å—å…¥å£æ–‡ä»¶.å¦‚æœæ‰¾åˆ°çš„è¯å°±æ‰§è¡Œ
- å¦‚æœä»¥ä¸Šéƒ½æ‰¾ä¸åˆ°çš„è¯,å°±æŠ¥é”™

# Node.jså¼‚æ­¥ç¼–ç¨‹
**åŒæ­¥APIå’Œå¼‚æ­¥API**
- åŒæ­¥API: åªæœ‰å½“å‰APIæ‰§è¡Œå®Œæˆä¹‹å,æ‰èƒ½ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªAPI
  æ‰€è°“åŒæ­¥å°±æ˜¯ä»£ç ä¸€è¡Œä¸€è¡Œçš„æ‰§è¡Œ,åªæœ‰å½“ä¸€è¡Œä»£ç æ‰§è¡Œå®Œæˆä¹‹åä¸‹ä¸€è¡Œä»£ç æ‰èƒ½æ‰§è¡Œ
```js
  console.log('before');
  console.log('after');
```
- å¼‚æ­¥API: å½“å‰APIçš„æ‰§è¡Œä¸ä¼šé˜»å¡åç»­ä»£ç çš„æ‰§è¡Œ
```js
  console.log("before");
  setTimeout({
    () => {
      console.log("last");
    };
  }, 2000);

  // ç”±äºä¸Šé¢çš„ä»£ç æœ‰ä¸€ä¸ªå®šæ—¶å™¨,æ‰€ä»¥å½“æœ‰è€—æ—¶æ“ä½œçš„æ—¶å€™,ä¸‹é¢çš„afterä¼šæ‰“å°
  console.log("after");
```

**åŒæ­¥APIå’Œå¼‚æ­¥APIçš„åŒºåˆ«(è·å–è¿”å›å€¼)**
1. åŒæ­¥APIå¯ä»¥ä»è¿”å›å€¼ä¸­æ‹¿åˆ°APIçš„æ‰§è¡Œç»“æœ,ä½†æ˜¯å¼‚æ­¥APIæ˜¯ä¸å¯ä»¥çš„
```js
  // åŒæ­¥
  function sum(n1, n2) {
    return n1 + n2;
  }
  // åŒæ­¥APIå¯ä»¥ç›´æ¥è·å–åˆ°å‡½æ•°çš„è¿”å›ç»“æœ
  const result = sum(10, 20);

  // å¼‚æ­¥
  function getMsg() {
    setTimeout(function() {
      return {msg: 'Hello Node.js'}
    }, 2000);
  }
  // æ— æ³•é€šè¿‡å¼‚æ­¥APIè·å–å‡½æ•°çš„è¿”å›å€¼
  const msg = getMsg();

  // å›è°ƒå‡½æ•°çš„ä¸€ç§è¡¨ç°å½¢å¼(å›è°ƒå‡½æ•°ä¼ å‚)
  function getData(callback) {
    callback('123');
  }
  getData(function(n) {
    console.log('callbackå‡½æ•°è¢«è°ƒç”¨äº†!');
    console.log(n);
  });

  // é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼è§£å†³æ— æ³•é€šè¿‡APIè·å–å‡½æ•°çš„è¿”å›å€¼
  function getMsg(callback) {
    setTimeout(function() {
      // æŠŠè¿”å›å€¼æ”¾åˆ°
      callback({msg: 'hello Node.js'});
    }, 2000)
  }
  getMsg(function(data) {
    // é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼è·å–å¼‚æ­¥APIçš„æ‰§è¡Œç»“æœ
    console.log(data);  // {msg: 'hello Node.js'}
  })
```

**åŒæ­¥APIå’Œå¼‚æ­¥APIçš„åŒºåˆ«(ä»£ç æ‰§è¡Œé¡ºåº)**
ğŸ˜‡åŒæ­¥APIä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ‰§è¡Œ,å‰ç«¯çš„ä»£ç ä¼šé˜»å¡åé¢ä»£ç çš„æ‰§è¡Œ
```js
  for(var i = 0; i < 1000; i++) {
    console.log(i);
  }
  // forå¾ªç¯æ²¡æœ‰æ‰§è¡Œå®Œæˆä¹‹å‰,ä¸‹é¢çš„æ‰“å°ä¸ä¼šè¢«æ‰§è¡Œ
  console.log("forå¾ªç¯åé¢çš„ä»£ç ");
```
ğŸ˜‡å¼‚æ­¥APIä¸ä¼šç­‰å¾…APIæ‰§è¡Œå®Œæˆä¹‹åå†å‘ä¸‹æ‰§è¡Œä»£ç 
```js
  console.log("ä»£ç å¼€å§‹æ‰§è¡Œ");
  setTimeout(() => {console.log('2ç§’åæ‰§è¡Œçš„ä»£ç '), 2000})
  setTimeout(() => {console.log('0ç§’åæ‰§è¡Œçš„ä»£ç '), 0})
  console.log("ä»£ç ç»“æŸæ‰§è¡Œ");
  /*
    ä»£ç æ‰§è¡Œçš„é¡ºåº
    1. ä»£ç å¼€å§‹æ‰§è¡Œ
    2. ä»£ç ç»“æŸæ‰§è¡Œ
    3. 0ç§’åæ‰§è¡Œçš„ä»£ç 
    4. 2ç§’åæ‰§è¡Œçš„ä»£ç 
  */
```

**Node.jsä¸­çš„å¼‚æ­¥API**
```js
  fs.readFile('./demo.txt', (err, result) => {})
  /*
    å¦‚æœå¼‚æ­¥APIåé¢ä»£ç çš„æ‰§è¡Œä¾èµ–å½“å‰å¼‚æ­¥APIçš„æ‰§è¡Œç»“æœ.
    ä½†æ˜¯å®é™…ä¸Šåç»­ä»£ç åœ¨æ‰§è¡Œçš„æ—¶å€™å¼‚æ­¥APIè¿˜æ²¡æœ‰è¿”å›ç»“æœ,è¿™ä¸ªé—®é¢˜è¦æ€ä¹ˆè§£å†³?
    æˆ‘ä»¬è™½ç„¶å¯ä»¥é€šè¿‡å›è°ƒå‡½æ•°çš„æ–¹å¼è§£å†³è·å–è¿”å›ç»“æœçš„é—®é¢˜
    ä½†æ˜¯å¦‚æœæ˜¯ä¸‹é¢çš„è¿™ç§éœ€æ±‚,å°±ä¼šå‡ºç°å›è°ƒå±‚æ¬¡è¿‡å¤š,å°±ä¼šå‡ºç°å›è°ƒåœ°ç‹±çš„é—®é¢˜
      éœ€æ±‚: ä¾æ¬¡è¯»å–Aæ–‡ä»¶,Bæ–‡ä»¶,Cæ–‡ä»¶
      è¿™å°±è¦æ±‚æˆ‘ä»¬è¦å…ˆå…¨éƒ¨è¯»å–å®ŒAæ–‡ä»¶ä¹‹åå†è¯»å–Bæ–‡ä»¶,ç„¶åå…¨éƒ¨è¯»å–å®Œæˆä¹‹åå†è¯»å–Cæ–‡ä»¶
      æˆ‘ä»¬éœ€è¦ä¸€æ­¥æ­¥çš„åµŒå¥—,ä»è€Œå°±ä¼šé€ æˆå›è°ƒåœ°ç‹±çš„é—®é¢˜
  */
  // å›è°ƒåœ°ç‹±çš„å…·ä½“æ¼”ç¤º,å›è°ƒå±‚æ¬¡è¿‡å¤š,ä»£ç ä¸å¥½ç»´æŠ¤
  const fs = require('fs');
  fs.readFile('./1.txt', 'utf8', (err, result1) => {
    console.log(result1)
    fs.readFile('./2.txt', 'utf8', (err, result2) => {
      console.log(result2)
      fs.readFile('./3.txt', 'utf8', (err, result3) => {
        console.log(result3)
      })
    })
  });

```

**Promise**
> Promiseå‡ºç°çš„ç›®çš„æ˜¯ä¸ºäº†è§£å†³Node.jså¼‚æ­¥ç¼–ç¨‹ä¸­å›è°ƒåœ°ç‹±çš„é—®é¢˜
> Promiseæœ¬èº«å¹¶æ²¡æœ‰æä¾›æ–°çš„åŠŸèƒ½,å®ƒåªæ˜¯å¯¹å¼‚æ­¥ç¼–ç¨‹è¯­æ³•æœ¬èº«çš„æ”¹è¿›
> å¯ä»¥å°†å¼‚æ­¥APIçš„æ‰§è¡Œå’Œç»“æœè¿›è¡Œåˆ†ç¦»
```js
  let promise = new Promise((resove, reject) => {
    /*
      æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªå®šæ—¶å™¨,å®šæ—¶å™¨ä¼šè¿”å›ä¸€ä¸ªç»“æœ
      Promiseå¸Œæœ›æˆ‘ä»¬æŠŠå®šæ—¶å™¨è¿”å›çš„ç»“æœåœ¨Promiseå¤–éƒ¨å¤„ç†
    */
    setTimeout(() => {
      if(true) {
        resolve({name: 'å¼ ä¸‰'})
      } else {
        reject('æ‰§è¡Œå¤±è´¥!')
      }
    }, 2000)
  });

  // é€šè¿‡Promiseå¯¹è±¡æ¥è·å–å¼‚æ­¥APIçš„æ‰§è¡Œç»“æœ
  promise.then(result => {
    console.log(result);  // {name: 'å¼ ä¸‰'}
  }).catch(error => {
    console.log(error);  // æ‰§è¡Œå¤±è´¥
  })
```
ğŸ¥³ä½¿ç”¨Promiseæ¥è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜
```js
  // æŠŠéœ€è¦å®‰è£…é¡ºåºæ‰§è¡Œçš„æ–‡ä»¶è¯»å–æ“ä½œæ”¾åˆ°å‡½æ•°å½“ä¸­
  function p1 () {
    return new Promise ((resolve, reject) => {
      fs.readFile('./1.txt', 'utf8', (err, result) => {
        resolve(result);
      })
    });
  }
  function p2 () {
    return new Promise ((resolve, reject) => {
      fs.readFile('./2.txt', 'utf8', (err, result) => {
        resolve(result);
      })
    });
  }
  function p3 () {
    return new Promise ((resolve, reject) => {
      fs.readFile('./3.txt', 'utf8', (err, result) => {
        resolve(result);
      })
    });
  }

  p1().then((r1) => {
    console.log(r1);
    // å½“æ–‡ä»¶è¯»å–å®Œæˆä¹‹åè¿”å›å¦ä¸€ä¸ªå‡½æ•°çš„å¯¹è±¡
    return p2();
  })
  .then((r2) => {
    console.log(r2);
    return p3();
  })
  .then((r3) => {
    console.log(r3)
  })
```

**å¼‚æ­¥å‡½æ•°**
- ä½¿ç”¨`Promise`å­˜åœ¨çš„é—®é¢˜
ä½¿ç”¨`Promise`è™½ç„¶å¯ä»¥è§£å†³å›è°ƒåœ°ç‹±çš„é—®é¢˜,ä½†æ˜¯å°±Promiseè¯­æ³•æœ¬èº«è€Œè¨€è¿˜æ˜¯æ¯”è¾ƒç¹ççš„.
æˆ‘ä»¬éœ€è¦åœ¨æ¯ä¸€ä¸ªå¼‚æ­¥APIå¤–é¢åŒ…è£¹ä¸€å±‚Promiseå¯¹è±¡,è¿˜éœ€è¦`æ‰‹åŠ¨è°ƒç”¨resolve`æ–¹æ³•å’Œ`reject`æ–¹æ³•,å°†æ•°æ®æˆ–è€…é”™è¯¯ä¿¡æ¯ä¼ é€’å‡ºå».åœ¨promiseå¤–é¢ä½¿ç”¨thenè¿›è¡Œè°ƒç”¨ä½¿å¾—ä»£ç çœ‹èµ·æ¥æ¯”è¾ƒè‡ƒè‚¿
- `ES7ä¸­çš„å¼‚æ­¥å‡½æ•°`
`ES7ä¸­çš„å¼‚æ­¥å‡½æ•°`æ˜¯å¼‚æ­¥ç¼–ç¨‹è¯­æ³•çš„ç»ˆæè§£å†³æ–¹æ¡ˆ,å®ƒå¯ä»¥è®©æˆ‘ä»¬å°†å¼‚æ­¥ä»£ç å†™æˆåŒæ­¥çš„å½¢å¼.
ä»è€Œè®©ä»£ç ä¸å†æœ‰å›è°ƒå‡½æ•°çš„åµŒå¥—,ä½¿ä»£ç æ›´åŠ çš„æ¸…æ™°æ˜äº†.
*asyncå…³é”®å­—*
1. æ™®é€šå‡½æ•°å®šä¹‰ä¹‹å‰æ·»åŠ asyncå…³é”®å­—,æ™®é€šå‡½æ•°å°±å˜æˆäº†å¼‚æ­¥å‡½æ•°
2. å¼‚æ­¥å‡½æ•°é»˜è®¤è¿”å›ä¸€ä¸ªpromiseå¯¹è±¡
3. åœ¨å¼‚æ­¥å‡½æ•°å†…éƒ¨ä½¿ç”¨`returnå…³é”®å­—`è¿›è¡Œç»“æœè¿”å›,ç»“æœä¼šè¢«`åŒ…è£¹åˆ°promiseå¯¹è±¡`ä¸­,returnå…³é”®å­—ä»£æ›¿äº†resolveæ–¹æ³•
4. åœ¨å¼‚æ­¥å‡½æ•°å†…éƒ¨ä½¿ç”¨`throwå…³é”®å­—`æŠ›å‡ºç¨‹åºå¼‚å¸¸
5. è°ƒç”¨å¼‚æ­¥å‡½æ•°ç„¶åå†é“¾å¼è°ƒç”¨thenæ–¹æ³•è·å–å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œç»“æœ
6. è°ƒç”¨å¼‚æ­¥å‡½æ•°å†é“¾å¼è°ƒç”¨catchæ–¹æ³•è·å–å¼‚æ­¥å‡½æ•°æ‰§è¡Œçš„é”™è¯¯ä¿¡æ¯
*awaitå…³é”®å­—*
1. awaitå…³é”®å­—åªèƒ½å‡ºç°åœ¨å¼‚æ­¥å‡½æ•°ä¸­
2. await promise awaitåé¢åªèƒ½å†™promiseå¯¹è±¡,å†™å…¶ä»–çš„APIæ˜¯ä¸å¯ä»¥çš„
3. awaitå…³é”®å­—æ˜¯å¯ä»¥æš‚åœå¼‚æ­¥å‡½æ•°å‘ä¸‹æ‰§è¡Œçš„,ç›´åˆ°promiseå¯¹è±¡è¿”å›ç»“æœ
```js
  // 1.æ™®é€šå‡½æ•°åŠ ä¸Šasyncå…³é”®å­—,å°±å˜æˆäº†å¼‚æ­¥å‡½æ•°
  // 2. å¼‚æ­¥å‡½æ•°é»˜è®¤çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡
  // 3. åœ¨å¼‚æ­¥å‡½æ•°çš„å†…éƒ¨ä½¿ç”¨throwå…³é”®å­—è¿›è¡Œé”™è¯¯çš„æŠ›å‡º
  const fn  = async () => {};
  async function fn() {};

  async function fn() {
    throw "å‘ç”Ÿäº†æœªçŸ¥çš„é”™è¯¯";
    return 123;
  }
  // å› ä¸ºå¼‚æ­¥å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡,å› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨é“¾å¼ç¼–ç¨‹
  fn().then((data) => {
    console.log(data);  // 123
  }).catch(() => {
    console.log(data);  // å‘ç”Ÿäº†æœªçŸ¥çš„é”™è¯¯
  })
```
ğŸ¥³awaitå…³é”®å­—çš„ä½¿ç”¨
1. å®ƒåªèƒ½å‡ºç°åœ¨å¼‚æ­¥å‡½æ•°ä¸­
2. await promiseå¯ä»¥æš‚åœå¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œç­‰å¾…promiseå¯¹è±¡è¿”å›ç»“æœåå†å‘ä¸‹æ‰§è¡Œ
> æ¨¡æ‹Ÿä¸€æ¬¡è¯»å–ä¸‰ä¸ªæ–‡ä»¶çš„æ“ä½œ
```js
  async function p1() {
    return 'p1';
  }
  async function p2() {
    return 'p2';
  }
  async function p3() {
    return 'p3';
  }

  async function run() {
    let r1 = await p1();
    // åœ¨è·å–åˆ°p1()è¿™ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¹‹å‰,ä¸‹é¢çš„ä»£ç æ˜¯ä¸ä¼šæ‰§è¡Œçš„
    let r2 = await p2();
    let r3 = await p3();

    console.log(r1);
    console.log(r2);
    console.log(r3);
  }

  // è°ƒç”¨runæ–¹æ³•ä¸€æ¬¡æ‰§è¡Œä¸‰ä¸ªæ–‡ä»¶çš„è¯»å–æ“ä½œ
  run();
```
ä½¿ç”¨å¼‚æ­¥å‡½æ•°çš„æ–¹å¼è¯»å–æ–‡ä»¶
```js
  const fs = require("fs"); 
  // util.promisifyæ˜¯åœ¨node.js 8.xç‰ˆæœ¬ä¸­æ–°å¢çš„ä¸€ä¸ªå·¥å…·,
  // ç”¨äºå°†è€å¼çš„Error first callbackè½¬æ¢ä¸ºPromiseå¯¹è±¡,è®©è€é¡¹ç›®æ”¹é€ å˜å¾—æ›´ä¸ºè½»æ¾.
  // æ”¹é€ ç°æœ‰å¼‚æ­¥å‡½æ•°çš„api,è®©å…¶è¿”å›promiseå¯¹è±¡,ä»è€Œæ”¯æŒå¼‚æ­¥å‡½æ•°è¯­æ³•
  const promisify = require("util").promisify;
  // fs.readFileé€šè¿‡æ”¹é€ ,è¿”å›äº†ä¸€ä¸ªpromiseçš„æ–‡ä»¶è¯»å–å¯¹è±¡
  const readFile = promisify(fs.readFile);

  async function run() {
      let r1 = await readFile('./1.txt', 'utf8');
      let r2 = await readFile('./2.txt', 'utf8');
      let r3 = await readFile('./3.txt', 'utf8');

      console.log(r1);
      console.log(r2);
      console.log(r3);
  }

  run();
```

# Node.jså…¨å±€å¯¹è±¡global
åœ¨æµè§ˆå™¨ä¸­çš„å…¨å±€å¯¹è±¡æ˜¯window,åœ¨`Nodeä¸­å…¨å±€å¯¹è±¡æ˜¯global`
Nodeä¸­çš„å…¨å±€å¯¹è±¡æœ‰ä»¥ä¸‹æ–¹æ³•,å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨,globalå¯ä»¥çœç•¥
- console.log()
- setTimeout()
- clearTimeout()
- setInterval()
- clearInterval()